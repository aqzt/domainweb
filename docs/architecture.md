# 域名估价系统架构说明

## 系统架构概述

域名估价系统采用经典的三层架构设计，包括表示层、业务逻辑层和数据访问层。系统基于Golang和MySQL构建，使用Gin框架提供Web服务。

## 核心组件

### 表示层

表示层负责与用户交互，包括Web界面和API接口：

- **Web界面**：基于Bootstrap 5构建的响应式界面，支持PC和移动端
- **API接口**：RESTful风格的API，支持第三方系统集成

### 业务逻辑层

业务逻辑层包含系统的核心功能实现：

- **域名服务(DomainService)**：处理域名解析和估价核心逻辑
- **动态属性服务(DynamicAttributeService)**：获取和处理实时动态数据
- **历史服务(HistoryService)**：管理查询历史记录

### 数据访问层

数据访问层负责与数据库交互：

- **域名存储库(DomainRepository)**：管理域名属性和估价规则
- **历史存储库(HistoryRepository)**：管理查询历史记录

## 数据流程

1. 用户通过Web界面或API提交域名
2. 系统解析域名，提取基本信息（长度、结构、TLD等）
3. 系统获取动态属性（Alexa排名、搜索量等）
4. 系统根据估价算法计算域名价值和品相等级
5. 系统生成详细的估价报告并返回给用户
6. 系统保存查询记录到历史数据库

## 缓存机制

系统实现了简单的内存缓存机制，用于缓存动态属性数据：

- 缓存结构：域名 -> 属性名 -> 属性值
- 缓存有效期：默认24小时
- 自动清理：后台goroutine定期清理过期缓存

## 扩展性设计

系统设计考虑了未来的扩展性：

1. **模块化设计**：各功能模块独立，便于扩展和维护
2. **接口抽象**：通过接口抽象数据源，便于替换实现
3. **配置外部化**：关键参数通过配置文件管理，便于调整

## 部署架构

系统支持多种部署方式：

1. **单机部署**：适合小规模使用
2. **分布式部署**：
   - Web服务可水平扩展
   - 数据库可主从分离
   - 缓存可替换为Redis集群
